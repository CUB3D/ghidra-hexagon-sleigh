

define register offset=0x9000 size=1 [ Q0 Q1 Q2 Q3 ];
attach variables [ Qv4 Qt4 Qs4 Qd4 Qx4 ] [ Q0 Q1 Q2 Q3 ];

define pcodeop _vstub;

# HVX/ALL-COMPUTE-RESOURCE

# histogram
define pcodeop vhist;

with slot: iclass=0b001 {
    :"vhist" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_19_20=0 & imm_16_18=0b000 & imm_13=1 & imm_12=0 & imm_9_11=0b000 & imm_8=0 & imm_5_7=0b100 & imm_0_4=0 {
        vhist();
    }
    :"vhist" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_19_20=0 & imm_16_18=0b010 & imm_13=1 & imm_11_12=0 & imm_9_10=0b000 & imm_8=0 & imm_5_7=0b100 & imm_0_4=0 {
        vhist(Qv4);
    }
}

# weighted histogram
define pcodeop vwhist256;
define pcodeop vwhist256_sat;
define pcodeop vwhist128;

with slot: iclass=0b0001 {
   :"vwhist256" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_19_20=0 & imm_16_18=0b000 & imm_13=1 & imm_12=0 & imm_5_11=0b0010100 & imm_0_4=0 {
        vwhist256();
   }

   :"vwhist256:sat" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_19_20=0 & imm_16_18=0b000 & imm_13=1 & imm_12=0 & imm_5_11=0b0011100 & imm_0_4=0 {
        vwhist256_sat();
   }

   :"vwhist128" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_19_20=0 & imm_16_18=0b000 & imm_13=1 & imm_12=0 & imm_9_11=0b010 & imm_8=0 & imm_5_7=0b100 & imm_0_4=0 {
        vwhist128();
   }

   :"vwhist128(" imm_8 ")" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_19_20=0 & imm_16_18=0b000 & imm_13=1 & imm_12=0 & imm_9_11=0b011 & imm_8 & imm_5_7=0b100 & imm_0_4=0 {
        vwhist128(imm_8:1);
   }

   :"vwhist256(" Qv4 ")" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_19_20=0 & imm_16_18=0b010 & imm_13=1 & imm_11_12=0 & imm_5_11=0b010100 & imm_0_4=0 {
        vwhist256(Qv4);
   }

   :"vwhist256(" Qv4 "):sat" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_19_20=0 & imm_16_18=0b010 & imm_13=1 & imm_11_12=0 & imm_5_11=0b011100 & imm_0_4=0 {
        vwhist256(Qv4);
   }

   :"vwhist128(" Qv4 ")" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_19_20=0 & imm_16_18=0b010 & imm_13=1 & imm_11_12=0 & imm_9_10=0b10 & imm_8=0 & imm_5_7=0b100 & imm_0_4=0 {
        vwhist128(Qv4);
   }

   :"vwhist128(" Qv4 "," imm_8 ")" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_19_20=0 & imm_16_18=0b010 & imm_13=1 & imm_11_12=0 & imm_9_10=0b11 & imm_8 & imm_5_7=0b100 & imm_0_4=0 {
        vwhist128(Qv4, imm_8:1);
   }
}

# HVX/ALU-DOUBLE-RESOURCE

# predicate ops
with slot: iclass=0b0001 {
   :Qd4 "= and(" Qs4 "," Qt4 ")" is imm_24_27=0b1110 & Qt4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b11 & imm_13=0 & imm_10_12=0 & Qs4 & imm_2_7=0b000000 & Qd4 {
    Qd4 = Qs4 & Qt4;
   }

   :Qd4 "= or(" Qs4 "," Qt4 ")" is imm_24_27=0b1110 & Qt4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b11 & imm_13=0 & imm_10_12=0 & Qs4 & imm_2_7=0b000001 & Qd4 {
    Qd4 = Qs4 | Qt4;
   }

   :Qd4 "= xor(" Qs4 "," Qt4 ")" is imm_24_27=0b1110 & Qt4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b11 & imm_13=0 & imm_10_12=0 & Qs4 & imm_2_7=0b000011 & Qd4 {
    Qd4 = Qs4 ^ Qt4;
   }

   :Qd4 "= or(" Qs4 ",!" Qt4 ")" is imm_24_27=0b1110 & Qt4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b11 & imm_13=0 & imm_10_12=0 & Qs4 & imm_2_7=0b000100 & Qd4 {
    Qd4 = Qs4 | (~Qt4);
   }

   :Qd4 "= and(" Qs4 ",!" Qt4 ")" is imm_24_27=0b1110 & Qt4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b11 & imm_13=0 & imm_10_12=0 & Qs4 & imm_2_7=0b000101 & Qd4 {
    Qd4 = Qs4 | (~Qt4);
   }

   :Qd4 ".b = vshuffle(" Qs4 ".h, " Qt4 ".h)" is imm_24_27=0b1110 & Qt4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b11 & imm_13=0 & imm_10_12=0 & Qs4 & imm_2_7=0b000110 & Qd4 {
    _vstub();
   }

   :Qd4 ".w = vshuffle(" Qs4 ".w, " Qt4 ".w)" is imm_24_27=0b1110 & Qt4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b11 & imm_13=0 & imm_10_12=0 & Qs4 & imm_2_7=0b000111 & Qd4 {
    _vstub();
   }
}

# combine
with slot: iclass=0b0001 {
    :"if (!" S2_5_6 ") " VD5_pair "=vcombine(" VT5 "," VS5 ")" is imm_21_27=0b1010010 & VS5 & imm_13=0 & VT5 & imm_7=0 & S2_5_6 & VD5_pair {
        _vstub();
    }

    :"if (" S2_5_6 ") " VD5_pair "=vcombine(" VT5 "," VS5 ")" is imm_21_27=0b1010011 & VS5 & imm_13=0 & VT5 & imm_7=0 & S2_5_6 & VD5_pair {
        _vstub();
    }

    :VD5_pair "=vcombine(" VT5 "," VS5 ")" is imm_21_27=0b1111010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }
}

# in-lane shuffle
with slot: iclass=0b0001 {
    :VD5_pair ".h =vshuffoe(" VT5 ".h," VS5 ".h)" is imm_21_27=0b1111010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b101 & VD5_pair {
        _vstub();
    }

    :VD5_pair ".b =vshuffoe(" VT5 ".b," VS5 ".b)" is imm_21_27=0b1111010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b110 & VD5_pair {
        _vstub();
    }
}

# swap
with slot: iclass=0b0001 {
    :VD5_pair " =vswap(" Qt4 "," VT5 "," VS5 ".h)" is imm_21_27=0b1110101 & VS5 & imm_13=1 & VT5 & imm_7=0 & Qt4 & VD5_pair {
        _vstub();
    }
}

# sign / zero ext
with slot: iclass=0b0001 {
    :VD5_pair ".uh = vzxt(" VT5 ".ub)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b10 & imm_13=0 & VT5 & imm_5_7=0b001 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".uw = vzxt(" VT5 ".uh)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b10 & imm_13=0 & VT5 & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".h = vzxt(" VT5 ".b)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b10 & imm_13=0 & VT5 & imm_5_7=0b011 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".w = vzxt(" VT5 ".h)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b10 & imm_13=0 & VT5 & imm_5_7=0b100 & VD5_pair {
        _vstub();
    }
}

# arithmetic

with slot: iclass=0b0001 {
    :VD5_pair ".b = vadd(" VT5_pair ".b," VS5_pair ".b)" is imm_21_27=0b1100011 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b100 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".h = vadd(" VT5_pair ".h," VS5_pair ".h)" is imm_21_27=0b1100011 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b101 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".w = vadd(" VT5_pair ".w," VS5_pair ".w)" is imm_21_27=0b1100011 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b110 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".ub = vadd(" VT5_pair ".ub," VS5_pair ".ub):sat" is imm_21_27=0b1100011 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".uh = vadd(" VT5_pair ".uh," VS5_pair ".uh):sat" is imm_21_27=0b1100100 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b000 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".h = vadd(" VT5_pair ".h," VS5_pair ".h):sat" is imm_21_27=0b1100100 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b001 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".w = vadd(" VT5_pair ".w," VS5_pair ".w):sat" is imm_21_27=0b1100100 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }

    :VD5_pair ".b = vsub(" VT5_pair ".b," VS5_pair ".b)" is imm_21_27=0b1100100 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b011 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".h = vsub(" VT5_pair ".h," VS5_pair ".h)" is imm_21_27=0b1100100 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b100 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".w = vsub(" VT5_pair ".w," VS5_pair ".w)" is imm_21_27=0b1100100 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b101 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".ub = vsub(" VT5_pair ".ub," VS5_pair ".ub):sat" is imm_21_27=0b1100100 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b110 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".uh = vsub(" VT5_pair ".uh," VS5_pair ".uh):sat" is imm_21_27=0b1100100 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".h = vsub(" VT5_pair ".h," VS5_pair ".h):sat" is imm_21_27=0b1100101 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b000 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".w = vsub(" VT5_pair ".w," VS5_pair ".w):sat" is imm_21_27=0b1100101 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b001 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".b = vadd(" VT5_pair ".b," VS5_pair ".b):sat" is imm_21_27=0b1110101 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b000 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".b = vsub(" VT5_pair ".b," VS5_pair ".b):sat" is imm_21_27=0b1110101 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b001 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".uw = vadd(" VT5_pair ".uw," VS5_pair ".uw):sat" is imm_21_27=0b1110101 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }
    :VD5_pair ".uw = vsub(" VT5_pair ".uw," VS5_pair ".uw):sat" is imm_21_27=0b1110101 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b011 & VD5_pair {
        _vstub();
    }
}

# HVX/ALU-RESOURCE

# predicate ops

with slot: iclass=0b0001 {
    :Qd4 "= not(" Qs4 ")" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b11 & imm_13=0 & imm_10_12=0 & Qs4 & imm_2_7=0b000010 & Qd4 {
        _vstub();
    }
}

# byte cond vector assign
with slot: iclass=0b0001 {
    :Qd4 "= vand(" Qv4 "," VT5 ")" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_19_20=0 & imm_16_18=0b011 & imm_13=1 & VT5 & imm_5_7=0b000 &  Qd4 {
        _vstub();
    }
    :Qd4 "= vand(!" Qv4 "," VT5 ")" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_19_20=0 & imm_16_18=0b011 & imm_13=1 & VT5 & imm_5_7=0b001 &  Qd4 {
        _vstub();
    }
}

# min / max
with slot: iclass=0b0001 {
    :VD5 ".ub = vmin(" VT5 ".ub," VS5 ".ub)" is imm_21_27=0b1111000 & VS5 & imm_13=0 & VT5 & imm_5_7=0b001 & VD5 {
        _vstub();
    }
    :VD5 ".uh = vmin(" VT5 ".uh," VS5 ".uh)" is imm_21_27=0b1111000 & VS5 & imm_13=0 & VT5 & imm_5_7=0b010 & VD5 {
        _vstub();
    }
    :VD5 ".h = vmin(" VT5 ".h," VS5 ".h)" is imm_21_27=0b1111000 & VS5 & imm_13=0 & VT5 & imm_5_7=0b011 & VD5 {
        _vstub();
    }
    :VD5 ".w = vmin(" VT5 ".w," VS5 ".w)" is imm_21_27=0b1111000 & VS5 & imm_13=0 & VT5 & imm_5_7=0b100 & VD5 {
        _vstub();
    }
    :VD5 ".ub = vmax(" VT5 ".ub," VS5 ".ub)" is imm_21_27=0b1111000 & VS5 & imm_13=0 & VT5 & imm_5_7=0b101 & VD5 {
        _vstub();
    }
    :VD5 ".uh = vmax(" VT5 ".uh," VS5 ".uh)" is imm_21_27=0b1111000 & VS5 & imm_13=0 & VT5 & imm_5_7=0b110 & VD5 {
        _vstub();
    }
    :VD5 ".h = vmax(" VT5 ".h," VS5 ".h)" is imm_21_27=0b1111000 & VS5 & imm_13=0 & VT5 & imm_5_7=0b111 & VD5 {
        _vstub();
    }
    :VD5 ".w = vmax(" VT5 ".w," VS5 ".w)" is imm_21_27=0b1111001 & VS5 & imm_13=0 & VT5 & imm_5_7=0b000 & VD5 {
        _vstub();
    }
    :VD5 ".b = vmin(" VT5 ".b," VS5 ".b)" is imm_21_27=0b1111001 & VS5 & imm_13=0 & VT5 & imm_5_7=0b100 & VD5 {
        _vstub();
    }
    :VD5 ".b = vmax(" VT5 ".b," VS5 ".b)" is imm_21_27=0b1111001 & VS5 & imm_13=0 & VT5 & imm_5_7=0b101 & VD5 {
        _vstub();
    }

    :VD5 ".sf = vmax(" VT5 ".sf," VS5 ".sf)" is imm_21_27=0b1111110 & VS5 & imm_13=1 & VT5 & imm_5_7=0b001 & VD5 {
        _vstub();
    }
    :VD5 ".sf = vmin(" VT5 ".sf," VS5 ".sf)" is imm_21_27=0b1111110 & VS5 & imm_13=1 & VT5 & imm_5_7=0b010 & VD5 {
        _vstub();
    }
    :VD5 ".hf = vmin(" VT5 ".hf," VS5 ".hf)" is imm_21_27=0b1111110 & VS5 & imm_13=1 & VT5 & imm_5_7=0b011 & VD5 {
        _vstub();
    }
    :VD5 ".hf = vmax(" VT5 ".hf," VS5 ".hf)" is imm_21_27=0b1111110 & VS5 & imm_13=1 & VT5 & imm_5_7=0b100 & VD5 {
        _vstub();
    }
}

# abs
with slot: iclass=0b0001 {
    :VD5 ".h = vabs(" VT5 ".h)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b00 & imm_13=0 & VT5 & imm_5_7=0b000 & VD5 {
        _vstub();
    }
    :VD5 ".h = vabs(" VT5 ".h):sat" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b00 & imm_13=0 & VT5 & imm_5_7=0b001 & VD5 {
        _vstub();
    }
    :VD5 ".w = vabs(" VT5 ".w)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b00 & imm_13=0 & VT5 & imm_5_7=0b010 & VD5 {
        _vstub();
    }
    :VD5 ".w = vabs(" VT5 ".w):sat" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b00 & imm_13=0 & VT5 & imm_5_7=0b011 & VD5 {
        _vstub();
    }
    :VD5 ".b = vabs(" VT5 ".b)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=0 & VT5 & imm_5_7=0b100 & VD5 {
        _vstub();
    }
    :VD5 ".b = vabs(" VT5 ".b):sat" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=0 & VT5 & imm_5_7=0b101 & VD5 {
        _vstub();
    }
}

# abs
with slot: iclass=0b0001 {
    :VD5 ".w = vadd(" VT5 ".w," VS5".w)" is imm_21_27=0b1100010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b000 & VD5 {
        _vstub();
    }
    :VD5 ".ub = vadd(" VT5 ".ub," VS5".ub):sat" is imm_21_27=0b1100010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b001 & VD5 {
        _vstub();
    }
    :VD5 ".uh = vadd(" VT5 ".uh," VS5".uh):sat" is imm_21_27=0b1100010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b010 & VD5 {
        _vstub();
    }
    :VD5 ".h = vadd(" VT5 ".h," VS5".h):sat" is imm_21_27=0b1100010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b011 & VD5 {
        _vstub();
    }
    :VD5 ".w = vadd(" VT5 ".w," VS5".w):sat" is imm_21_27=0b1100010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b100 & VD5 {
        _vstub();
    }
    :VD5 ".b = vsub(" VT5 ".b," VS5".b)" is imm_21_27=0b1100010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b101 & VD5 {
        _vstub();
    }
    :VD5 ".h = vsub(" VT5 ".h," VS5".h)" is imm_21_27=0b1100010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b110 & VD5 {
        _vstub();
    }
    :VD5 ".w = vsub(" VT5 ".w," VS5".w)" is imm_21_27=0b1100010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b111 & VD5 {
        _vstub();
    }
    :VD5 ".ub = vsub(" VT5 ".ub," VS5".ub):sat" is imm_21_27=0b1100011 & VS5 & imm_13=0 & VT5 & imm_5_7=0b000 & VD5 {
        _vstub();
    }
    :VD5 ".uh = vsub(" VT5 ".uh," VS5".uh):sat" is imm_21_27=0b1100011 & VS5 & imm_13=0 & VT5 & imm_5_7=0b001 & VD5 {
        _vstub();
    }
    :VD5 ".h = vsub(" VT5 ".h," VS5".h):sat" is imm_21_27=0b1100011 & VS5 & imm_13=0 & VT5 & imm_5_7=0b010 & VD5 {
        _vstub();
    }
    :VD5 ".w = vsub(" VT5 ".w," VS5".w):sat" is imm_21_27=0b1100011 & VS5 & imm_13=0 & VT5 & imm_5_7=0b011 & VD5 {
        _vstub();
    }

    :VD5 ".w = vadd(" VT5 ".w," VS5".w," Qx4 "):carry" is imm_21_27=0b1100101 & VS5 & imm_13=1 & VT5 & imm_7=0 & Qx4 & VD5 {
        _vstub();
    }
    :VD5 ".w = vsub(" VT5 ".w," VS5".w," Qx4 "):carry" is imm_21_27=0b1100101 & VS5 & imm_13=1 & VT5 & imm_7=1 & Qx4 & VD5 {
        _vstub();
    }

    :VD5 ".ub = vadd(" VT5 ".ub," VS5".b):sat" is imm_21_27=0b1110101 & VS5 & imm_13=0 & VT5 & imm_5_7=0b100 & VD5 {
        _vstub();
    }
    :VD5 ".ub = vsub(" VT5 ".ub," VS5".b):sat" is imm_21_27=0b1110101 & VS5 & imm_13=0 & VT5 & imm_5_7=0b101 & VD5 {
        _vstub();
    }
    :VD5 ".b = vadd(" VT5 ".b," VS5".b):sat" is imm_21_27=0b1111000 & VS5 & imm_13=0 & VT5 & imm_5_7=0b000 & VD5 {
        _vstub();
    }

    :VD5 ".b = vsub(" VT5 ".b," VS5".b):sat" is imm_21_27=0b1111001 & VS5 & imm_13=0 & VT5 & imm_5_7=0b010 & VD5 {
        _vstub();
    }
    :VD5 ".uw = vadd(" VT5 ".uw," VS5".uw):sat" is imm_21_27=0b1111011 & VS5 & imm_13=0 & VT5 & imm_5_7=0b001 & VD5 {
        _vstub();
    }
    :VD5 ".b = vadd(" VT5 ".b," VS5".b)" is imm_21_27=0b1111101 & VS5 & imm_13=0 & VT5 & imm_5_7=0b110 & VD5 {
        _vstub();
    }
    :VD5 ".h = vadd(" VT5 ".h," VS5".h)" is imm_21_27=0b1111101 & VS5 & imm_13=0 & VT5 & imm_5_7=0b111 & VD5 {
        _vstub();
    }
    :VD5 ".uw = vsub(" VT5 ".uw," VS5".uw):sat" is imm_21_27=0b1111110 & VS5 & imm_13=0 & VT5 & imm_5_7=0b100 & VD5 {
        _vstub();
    }
}

# Logical ops
with slot: iclass=0b0001 {
    :VD5 "= vand(" VT5 "," VS5")" is imm_21_27=0b1100001 & VS5 & imm_13=0 & VT5 & imm_5_7=0b101 & VD5 {
        _vstub();
    }
    :VD5 "= vor(" VT5 "," VS5")" is imm_21_27=0b1100001 & VS5 & imm_13=0 & VT5 & imm_5_7=0b110 & VD5 {
        _vstub();
    }
    :VD5 "= vxor(" VT5 "," VS5")" is imm_21_27=0b1100001 & VS5 & imm_13=0 & VT5 & imm_5_7=0b111 & VD5 {
        _vstub();
    }
    :VD5 "= vnot(" VT5 ")" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0 & imm_13=0 & VT5 & imm_5_7=0b100 & VD5 {
        _vstub();
    }
}

# copy
with slot: iclass=0b0001 {
    :"if (" U2_5_6 ") " VD5 "=" VT5 is imm_21_27=0b1010000 & imm_16_20=0 & imm_13=0 & VT5 & imm_7=0 & U2_5_6 & VD5 {
        _vstub();
    }
    :"if (!" U2_5_6 ") " VD5 "=" VT5 is imm_21_27=0b1010001 & imm_16_20=0 & imm_13=0 & VT5 & imm_7=0 & U2_5_6 & VD5 {
        _vstub();
    }

    :VD5 "=" VT5 is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_19_20=0 & imm_16_18=0b011 & imm_13=1 & VT5 & imm_5_7=0b111 & VD5 {
        _vstub();
    }
}

# temporary assignment
with slot: iclass=0b0001 {
    :VD5 ".tmp =" VT5 is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=0 & VT5 & imm_5_7=0b110 & VD5 {
        _vstub();
    }
    :VD5_pair ".tmp = vcombine(" VT5 "," VS5 ")" is imm_21_27=0b1110101 & VS5 & imm_13=0 & VT5 & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }
}

# average
with slot: iclass=0b0001 {
    :VD5_pair".ub = vavg("VT5_pair".ub,"VS5_pair".ub)" is imm_21_27=0b1100110 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b100 & VD5_pair {
        _vstub();
    }
    :VD5_pair".uh = vavg("VT5_pair".uh,"VS5_pair".uh)" is imm_21_27=0b1100110 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b101 & VD5_pair {
        _vstub();
    }
    :VD5_pair".h = vavg("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1100110 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b110 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w = vavg("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1100110 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }
    :VD5_pair".b = vnavg("VT5_pair".ub,"VS5_pair".ub)" is imm_21_27=0b1100111 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b000 & VD5_pair {
        _vstub();
    }
    :VD5_pair".h = vnavg("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1100111 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b001 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w = vnavg("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1100111 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }
    :VD5_pair".ub = vavg("VT5_pair".ub,"VS5_pair".ub):rnd" is imm_21_27=0b1100111 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b011 & VD5_pair {
        _vstub();
    }
    :VD5_pair".uh = vavg("VT5_pair".uh,"VS5_pair".uh):rnd" is imm_21_27=0b1100111 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b100 & VD5_pair {
        _vstub();
    }
    :VD5_pair".h = vavg("VT5_pair".h,"VS5_pair".h):rnd" is imm_21_27=0b1100111 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b101 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w = vavg("VT5_pair".w,"VS5_pair".w):rnd" is imm_21_27=0b1100111 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b110 & VD5_pair {
        _vstub();
    }
    :VD5_pair".uw = vavg("VT5_pair".uw,"VS5_pair".uw)" is imm_21_27=0b1111000 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }
    :VD5_pair".uw = vavg("VT5_pair".uw,"VS5_pair".uw):rnd" is imm_21_27=0b1111000 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b011 & VD5_pair {
        _vstub();
    }
    :VD5_pair".b = vavg("VT5_pair".b,"VS5_pair".b)" is imm_21_27=0b1111000 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b100 & VD5_pair {
        _vstub();
    }
    :VD5_pair".b = vavg("VT5_pair".b,"VS5_pair".b):rnd" is imm_21_27=0b1111000 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b101 & VD5_pair {
        _vstub();
    }
    :VD5_pair".b = vnavg("VT5_pair".ub,"VS5_pair".ub)" is imm_21_27=0b1111000 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b110 & VD5_pair {
        _vstub();
    }
}

# compare vector
with slot: iclass=0b0001 {
    :Qd4" &= vcmp.eq("VT5_pair".b,"VS5_pair".b)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b000000 & Qd4 {
        _vstub();
    }
    :Qd4" &= vcmp.eq("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b000001 & Qd4 {
        _vstub();
    }
    :Qd4" &= vcmp.eq("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b000010 & Qd4 {
        _vstub();
    }
    :Qd4" &= vcmp.gt("VT5_pair".b,"VS5_pair".b)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b000100 & Qd4 {
        _vstub();
    }
    :Qd4" &= vcmp.gt("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b000101 & Qd4 {
        _vstub();
    }
    :Qd4" &= vcmp.gt("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b000110 & Qd4 {
        _vstub();
    }
    :Qd4" &= vcmp.gt("VT5_pair".ub,"VS5_pair".ub)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b001000 & Qd4 {
        _vstub();
    }
    :Qd4" &= vcmp.gt("VT5_pair".uh,"VS5_pair".uh)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b001001 & Qd4 {
        _vstub();
    }
    :Qd4" &= vcmp.gt("VT5_pair".uw,"VS5_pair".uw)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b001010 & Qd4 {
        _vstub();
    }
    :Qd4" |= vcmp.eq("VT5_pair".b,"VS5_pair".b)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b010000 & Qd4 {
        _vstub();
    }
    :Qd4" |= vcmp.eq("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b010001 & Qd4 {
        _vstub();
    }
    :Qd4" |= vcmp.eq("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b010010 & Qd4 {
        _vstub();
    }
    :Qd4" |= vcmp.gt("VT5_pair".b,"VS5_pair".b)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b010100 & Qd4 {
        _vstub();
    }
    :Qd4" |= vcmp.gt("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b010101 & Qd4 {
        _vstub();
    }
    :Qd4" |= vcmp.gt("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b010110 & Qd4 {
        _vstub();
    }
    :Qd4" |= vcmp.gt("VT5_pair".ub,"VS5_pair".ub)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b011000 & Qd4 {
        _vstub();
    }
    :Qd4" |= vcmp.gt("VT5_pair".uh,"VS5_pair".uh)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b011001 & Qd4 {
        _vstub();
    }
    :Qd4" |= vcmp.gt("VT5_pair".uw,"VS5_pair".uw)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b011010 & Qd4 {
        _vstub();
    }
    :Qd4" ^= vcmp.eq("VT5_pair".b,"VS5_pair".b)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b100000 & Qd4 {
        _vstub();
    }
    :Qd4" ^= vcmp.eq("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b100001 & Qd4 {
        _vstub();
    }
    :Qd4" ^= vcmp.eq("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b100010 & Qd4 {
        _vstub();
    }
    :Qd4" ^= vcmp.gt("VT5_pair".b,"VS5_pair".b)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b100100 & Qd4 {
        _vstub();
    }
    :Qd4" ^= vcmp.gt("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b100101 & Qd4 {
        _vstub();
    }
    :Qd4" ^= vcmp.gt("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b100110 & Qd4 {
        _vstub();
    }
    :Qd4" ^= vcmp.gt("VT5_pair".ub,"VS5_pair".ub)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b101000 & Qd4 {
        _vstub();
    }
    :Qd4" ^= vcmp.gt("VT5_pair".uh,"VS5_pair".uh)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b101001 & Qd4 {
        _vstub();
    }
    :Qd4" ^= vcmp.gt("VT5_pair".uw,"VS5_pair".uw)" is imm_21_27=0b1100100 & VS5_pair & imm_13=1 & VT5_pair & imm_2_7=0b101010 & Qd4 {
        _vstub();
    }
   
    
    :Qd4" = vcmp.eq("VT5_pair".b,"VS5_pair".b)" is imm_21_27=0b1111100 & VS5_pair & imm_13=0 & VT5_pair & imm_2_7=0b000000 & Qd4 {
        _vstub();
    }
    :Qd4" = vcmp.eq("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1111100 & VS5_pair & imm_13=0 & VT5_pair & imm_2_7=0b000001 & Qd4 {
        _vstub();
    }
    :Qd4" = vcmp.eq("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1111100 & VS5_pair & imm_13=0 & VT5_pair & imm_2_7=0b000010 & Qd4 {
        _vstub();
    }
    :Qd4" = vcmp.gt("VT5_pair".b,"VS5_pair".b)" is imm_21_27=0b1111100 & VS5_pair & imm_13=0 & VT5_pair & imm_2_7=0b000100 & Qd4 {
        _vstub();
    }
    :Qd4" = vcmp.gt("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1111100 & VS5_pair & imm_13=0 & VT5_pair & imm_2_7=0b000101 & Qd4 {
        _vstub();
    }
    :Qd4" = vcmp.gt("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1111100 & VS5_pair & imm_13=0 & VT5_pair & imm_2_7=0b000110 & Qd4 {
        _vstub();
    }
    :Qd4" = vcmp.gt("VT5_pair".ub,"VS5_pair".ub)" is imm_21_27=0b1111100 & VS5_pair & imm_13=0 & VT5_pair & imm_2_7=0b001000 & Qd4 {
        _vstub();
    }
    :Qd4" = vcmp.gt("VT5_pair".uh,"VS5_pair".uh)" is imm_21_27=0b1111100 & VS5_pair & imm_13=0 & VT5_pair & imm_2_7=0b001001 & Qd4 {
        _vstub();
    }
    :Qd4" = vcmp.gt("VT5_pair".uw,"VS5_pair".uw)" is imm_21_27=0b1111100 & VS5_pair & imm_13=0 & VT5_pair & imm_2_7=0b001010 & Qd4 {
        _vstub();
    }
}

# cond accumulate
with slot: iclass=0b0001 {
    :"if("Qv4")"VD5_pair".b += "VT5_pair".b)" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=1 & VT5_pair & imm_5_7=0b000 & VD5_pair {
        _vstub();
    }
    :"if("Qv4")"VD5_pair".h += "VT5_pair".h)" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=1 & VT5_pair & imm_5_7=0b001 & VD5_pair {
        _vstub();
    }
    :"if("Qv4")"VD5_pair".w += "VT5_pair".w)" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=1 & VT5_pair & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }
    :"if(!"Qv4")"VD5_pair".b += "VT5_pair".b)" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=1 & VT5_pair & imm_5_7=0b011 & VD5_pair {
        _vstub();
    }
    :"if(!"Qv4")"VD5_pair".h += "VT5_pair".h)" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=1 & VT5_pair & imm_5_7=0b100 & VD5_pair {
        _vstub();
    }
    :"if(!"Qv4")"VD5_pair".w += "VT5_pair".w)" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=1 & VT5_pair & imm_5_7=0b101 & VD5_pair {
        _vstub();
    }
    :"if("Qv4")"VD5_pair".b -= "VT5_pair".b)" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=1 & VT5_pair & imm_5_7=0b110 & VD5_pair {
        _vstub();
    }
}

# mux select
with slot: iclass=0b0001 {
    :VD5 "= vmux(" Qt4 "," VT5 "," VS5 ")" is imm_21_27=0b1110111 & VS5 & imm_13=1 & VT5 & imm_7=0 & Qt4 & VD5 {
        _vstub();
    }
}

# saturation
with slot: iclass=0b0001 {
    :VD5 ".w = vsatdw(" VT5 ".w," VS5 ".w)" is imm_21_27=0b1101100 & VS5 & imm_13=1 & VT5 & imm_5_7=0b111 & VD5 {
        _vstub();
    }
    :VD5 ".uh = vsat(" VT5 ".uw," VS5 ".uw)" is imm_21_27=0b1111001 & VS5 & imm_13=0 & VT5 & imm_5_7=0b110 & VD5 {
        _vstub();
    }
    :VD5 ".ub = vsat(" VT5 ".h," VS5 ".h)" is imm_21_27=0b1111011 & VS5 & imm_13=0 & VT5 & imm_5_7=0b010 & VD5 {
        _vstub();
    }
    :VD5 ".h = vsat(" VT5 ".w," VS5 ".w)" is imm_21_27=0b1111011 & VS5 & imm_13=0 & VT5 & imm_5_7=0b011 & VD5 {
        _vstub();
    }
}

# in lane shuffle
with slot: iclass=0b0001 {
    :VD5 ".b = vshuffe(" VT5 ".b," VS5 ".b)" is imm_21_27=0b1111010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b001 & VD5 {
        _vstub();
    }
    :VD5 ".b = vshuffo(" VT5 ".b," VS5 ".b)" is imm_21_27=0b1111010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b010 & VD5 {
        _vstub();
    }
    :VD5 ".h = vshuffe(" VT5 ".h," VS5 ".h)" is imm_21_27=0b1111010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b011 & VD5 {
        _vstub();
    }
    :VD5 ".h = vshuffo(" VT5 ".h," VS5 ".h)" is imm_21_27=0b1111010 & VS5 & imm_13=0 & VT5 & imm_5_7=0b100 & VD5 {
        _vstub();
    }
}


# HVX/ALU-RESORUCE/DEBUG
# extract vector element
with slot: iclass=0b1001 {
    :D5 " = vextract(" VT5 "," S5")" is imm_21_27=0b0010000 & S5 & imm_13=0 & VT5 & imm_5_7=0b001 & D5 {
        _vstub();
    }
}

# HVX/GATHER
# vector gather
with slot: iclass=0b0010 {
    :"vtmp.w = vgather(" S5 "," imm_13u "," VD5 ".w).w" is imm_21_27=0b1111000 & S5 & imm_13u & imm_11_12=0 & imm_8_10=0b000 & imm_5_7=0 & VD5 {
        _vstub();
    }
    :"vtmp.h = vgather(" S5 "," imm_13u "," VD5 ".h).h" is imm_21_27=0b1111000 & S5 & imm_13u & imm_11_12=0 & imm_8_10=0b001 & imm_5_7=0 & VD5 {
        _vstub();
    }

    :"if("Qs4") vtmp.w = vgather(" S5 "," imm_13u "," VD5 ".w).w" is imm_21_27=0b1111000 & S5 & imm_13u & imm_11_12=0 & imm_8_10=0b100 & imm_7=0 & Qs4 & VD5 {
        _vstub();
    }
    :"if("Qs4") vtmp.h = vgather(" S5 "," imm_13u "," VD5 ".h).h" is imm_21_27=0b1111000 & S5 & imm_13u & imm_11_12=0 & imm_8_10=0b101 & imm_7=0 & Qs4 & VD5 {
        _vstub();
    }
}

# HVX/GATHER DOUBLE RESOURCE
# vector gather
with slot: iclass=0b0010 {
    :"vtmp.h = vgather(" S5 "," imm_13u "," VD5_pair ".h).h" is imm_21_27=0b1111000 & S5 & imm_13u & imm_11_12=0 & imm_8_10=0b010 & imm_5_7=0 & VD5_pair {
        _vstub();
    }

    :"if("Qs4") vtmp.h = vgather(" S5 "," imm_13u "," VD5_pair ".w).h" is imm_21_27=0b1111000 & S5 & imm_13u & imm_11_12=0 & imm_8_10=0b110 & imm_7=0 & Qs4 & VD5_pair {
        _vstub();
    }
}

# HVX/LOAD

# load aligned
#TODO

# load immediate use
#TODO

# load temporary immediate use
#TODO

# load unaligned
#TODO

# HVX/MPY DOUBLE RESOURCE
#TODO

# Arithmetic widening
with slot: iclass=0b0001 {
    :VD5_pair" += vadd("VT5_pair","VS5_pair")" is imm_21_27=0b1100001 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w += vadd("VT5_pair".uh,"VS5_pair".uh)" is imm_21_27=0b1100001 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b100 & VD5_pair {
        _vstub();
    }
    :VD5_pair".h += vadd("VT5_pair".ub,"VS5_pair".ub)" is imm_21_27=0b1100001 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b101 & VD5_pair {
        _vstub();
    }

    :VD5_pair".h = vadd("VT5_pair".ub,"VS5_pair".ub)" is imm_21_27=0b1100101 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b010 & Vdd5_pair {
        _vstub();
    }

    :VD5_pair".w = vadd("VT5_pair".uh,"VS5_pair".uh)" is imm_21_27=0b1100101 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b011 & Vdd5_pair {
        _vstub();
    }
    :VD5_pair".w = vadd("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1100101 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b100 & Vdd5_pair {
        _vstub();
    }
    :VD5_pair".h = vsub("VT5_pair".ub,"VS5_pair".ub)" is imm_21_27=0b1100101 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b101 & Vdd5_pair {
        _vstub();
    }
    :VD5_pair".w = vsub("VT5_pair".uh,"VS5_pair".uh)" is imm_21_27=0b1100101 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b110 & Vdd5_pair {
        _vstub();
    }
    :VD5_pair".w = vsub("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1100101 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b111 & Vdd5_pair {
        _vstub();
    }
}

# Multiply with 2-wide reduction
with slot: iclass=0b0001 {
    :VD5_pair".h = vdmpy("VT5_pair".ub,"S5".b)" is imm_21_27=0b1001000 & S5 & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }  
    :VD5_pair".h += vdmpy("VT5_pair".ub,"S5".b)" is imm_21_27=0b1001000 & S5 & imm_13=1 & VT5_pair & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w = vdmpy("VT5_pair".h,"S5".uh):sat" is imm_21_27=0b1001001 & S5 & imm_13=0 & VT5_pair & imm_5_7=0b000 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w = vdmpy("VT5_pair".h,"S5".uh,1):sat" is imm_21_27=0b1001001 & S5 & imm_13=0 & VT5_pair & imm_5_7=0b001 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w = vdmpy("VT5_pair".h,"S5".h):sat" is imm_21_27=0b1001001 & S5 & imm_13=0 & VT5_pair & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w = vdmpy("VT5_pair".h,"S5".h):sat" is imm_21_27=0b1001001 & S5 & imm_13=0 & VT5_pair & imm_5_7=0b011 & VD5_pair {
        _vstub();
    }
    :Vdd5_pair".w = vdmpy("VT5_pair".h,"S5".b)" is imm_21_27=0b1001001 & S5 & imm_13=0 & VT5_pair & imm_5_7=0b100 & Vdd5_pair {
        _vstub();
    }
    :VD5_pair".w += vdmpy("VT5_pair".h,"S5".uh):sat" is imm_21_27=0b1001001 & S5 & imm_13=1 & VT5_pair & imm_5_7=0b000 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w += vdmpy("VT5_pair".h,"S5".uh,1):sat" is imm_21_27=0b1001001 & S5 & imm_13=1 & VT5_pair & imm_5_7=0b001 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w += vdmpy("VT5_pair".h,"S5".h):sat" is imm_21_27=0b1001001 & S5 & imm_13=1 & VT5_pair & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w += vdmpy("VT5_pair".h,"S5".h):sat" is imm_21_27=0b1001001 & S5 & imm_13=1 & VT5_pair & imm_5_7=0b011 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w += vdmpy("VT5_pair".h,"S5".b)" is imm_21_27=0b1001001 & S5 & imm_13=1 & VT5_pair & imm_5_7=0b100 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w = vdmpy("VT5_pair".h,"VS5_pair".h):sat" is imm_21_27=0b1110000 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b011 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w += vdmpy("VT5_pair".h,"VS5_pair".h):sat" is imm_21_27=0b1110000 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b011 & VD5_pair {
        _vstub();
    }
}

# Lookup table for piecewise from 64bit scalar
#TODO

# Multiply with piecewise add/sub from 64-bit scalar
#TODO

# Multiply - add
#TODO

# Multiply vector by scalar
# Multiply vector by vector
# Integer multiply - vector by vector
# Integer multiply 32x16
# Integer multiply accumulate even/odd
# Multiply 32x16
# Multiply bytes with 4-wide reduction
# Multiply by byte with accumulate
# Multiply with 3-wide reduction
# Sum of reduction of absolute differences
# Sum of absolute differences bytes

# HVX/MPY RESOURCE
#TODO

# HVX/PERMUTE RESOURCE
# Byte alignment
with slot: iclass=0b0001 {
	:VD5_pair" = vror("VT5_pair","VS5_pair")" is imm_21_27=0b1001011 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b001 & VD5_pair {
		_vstub();
	}
	
	:VD5_pair" = valign("VT5_pair","VS5_pair_19_23","S3_16_18")" is imm_24_27=0b1011 & VS5_pair_19_23 & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b000 & VD5_pair {
		_vstub();
	}
	:VD5_pair" = vlalign("VT5_pair","VS5_pair_19_23","S3_16_18")" is imm_24_27=0b1011 & VS5_pair_19_23 & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b001 & VD5_pair {
		_vstub();
	}
	
	:VD5_pair" = valign("VT5_pair","VS5_pair","imm_5_7u")" is imm_21_27=0b1110001 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7u & VD5_pair {
		_vstub();
	}
	:VD5_pair" = valign("VT5_pair","VS5_pair","imm_5_7u")" is imm_21_27=0b1110011 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7u & VD5_pair {
		_vstub();
	}
}

# General permute network
with slot: iclass=0b0001 {
	:VD5_pair" = vdelta("VT5_pair","VS5_pair")" is imm_21_27=0b1111001 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b001 & VD5_pair {
		_vstub();
	}
	:VD5_pair" = vrdelta("VT5_pair","VS5_pair")" is imm_21_27=0b1111001 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b011 & VD5_pair {
		_vstub();
	}
}

# Shuffle - deal
with slot: iclass=0b0001 {
    :VD5_pair".h = vdeal("VT5_pair".h)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b00 & imm_13=0 & VT5_pair & imm_5_7=0b110 & VD5_pair {
        _vstub();
    }
    :VD5_pair".b = vdeal("VT5_pair".b)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b00 & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }
    :VD5_pair".h = vshuff("VT5_pair".h)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }
    :VD5_pair".b = vshuff("VT5_pair".b)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b10 & imm_13=0 & VT5_pair & imm_5_7=0b000 & VD5_pair {
        _vstub();
    }
    :VD5_pair".b = vdeale("VT5_pair".b,"VS5_pair".b)" is imm_21_27=0b1111001 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }
}

# Pack
with slot: iclass=0b0001 {
    :VD5_pair".b = vpacke("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1111110 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }
    :VD5_pair".h = vpacke("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1111110 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b011 & VD5_pair {
        _vstub();
    }
    :VD5_pair".ub = vpack("VT5_pair".h,"VS5_pair".h):sat" is imm_21_27=0b1111110 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b101 & VD5_pair {
        _vstub();
    }
    :VD5_pair".b = vpack("VT5_pair".h,"VS5_pair".h):sat" is imm_21_27=0b1111110 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b110 & VD5_pair {
        _vstub();
    }
    :VD5_pair".uh = vpack("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1111110 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }
    :VD5_pair".h = vpack("VT5_pair".w,"VS5_pair".w):sat" is imm_21_27=0b1111111 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b000 & VD5_pair {
        _vstub();
    }
    :VD5_pair".b = vpacko("VT5_pair".h,"VS5_pair".h)" is imm_21_27=0b1111111 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b001 & VD5_pair {
        _vstub();
    }
    :VD5_pair".h = vpacko("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1111111 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }
}

# Set predicate
with slot: iclass=0b0001 {
    :Qd4" = vsetq("S5")" is imm_21_27=0b1001101 & S5 & imm_13=0 & imm_8_12=0 & imm_5_7=0b010 & imm_4=0 & imm_2_3=0b01 & Qd4 {
        _vstub();
    }   
    :Qd4" = vsetq1("S5")" is imm_21_27=0b1001101 & S5 & imm_13=0 & imm_8_12=0 & imm_5_7=0b010 & imm_4=0 & imm_2_3=0b11 & Qd4 {
        _vstub();
    }
}


# Vector in-lane lookup table
with slot: iclass=0b0001 {
	:VD5_pair".b = vlut32("VT5_pair".b,"VS5_pair_19_23".b,"S3_16_18"):nomatch" is imm_24_27=0b1000 & VS5_pair_19_23 & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b011 & VD5_pair {
		_vstub();
	}
	:VD5_pair".b = vlut32("VT5_pair".b,"VS5_pair_19_23".b,"S3_16_18")" is imm_24_27=0b1011 & VS5_pair_19_23 & S3_16_18 & imm_13=1 & VT5_pair & imm_5_7=0b001 & VD5_pair {
		_vstub();
	}
	
	:VD5_pair".b = vlut32("VT5_pair".b,"VS5_pair".b,"imm_5_7u")" is imm_21_27=0b1110001 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7u & VD5_pair {
		_vstub();
	}	
}

# HVX/PERMUTE SHIFT RESOURCE
# Vector ASR overlay
with slot: iclass=0b0001 {
	:VD5_pair".w = vasrinto("VT5_pair".w,"VS5_pair".w)" is imm_21_27=0b1010101 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b111 & VD5_pair {
		_vstub();
	}	
}

# Vector shuffle and deal cross lane
with slot: iclass=0b0001 {
	:"vshuff("VT5_pair","VD5_pair","S5")" is imm_21_27=0b1001111 & S5 & imm_13=1 & VT5_pair & imm_5_7=0b001 & VD5_pair {
		_vstub();
	}
	:"vdeal("VT5_pair","VD5_pair","S5")" is imm_21_27=0b1001111 & S5 & imm_13=1 & VT5_pair & imm_5_7=0b010 & VD5_pair {
		_vstub();
	}
	
	:VD5_pair" = vshuff("VT5_pair","VS5_pair_19_23","S3_16_18")" is imm_24_27=0b1011 & VS5_pair_19_23 & S3_16_18 & imm_13=1 & VT5_pair & imm_5_7=0b011 & VD5_pair {
		_vstub();
	}
	:VD5_pair" = vdeal("VT5_pair","VS5_pair_19_23","S3_16_18")" is imm_24_27=0b1011 & VS5_pair_19_23 & S3_16_18 & imm_13=1 & VT5_pair & imm_5_7=0b100 & VD5_pair {
		_vstub();
	}
}

# Unpack
with slot: iclass=0b0001 {
	:VD5_pair".uh = vunpack("VT5_pair".ub)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=0 & VT5_pair & imm_5_7=0b000 & VD5_pair {
		_vstub();
	}
	:VD5_pair".uw = vunpack("VT5_pair".uh)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=0 & VT5_pair & imm_5_7=0b001 & VD5_pair {
		_vstub();
	}
	:VD5_pair".h = vunpack("VT5_pair".b)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=0 & VT5_pair & imm_5_7=0b010 & VD5_pair {
		_vstub();
	}
	:VD5_pair".w = vunpack("VT5_pair".h)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b01 & imm_13=0 & VT5_pair & imm_5_7=0b011 & VD5_pair {
		_vstub();
	}
	
	:VD5_pair".h |= vunpack("VT5_pair".b)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_19_20=0 & imm_16_18=0b000 & imm_13=1 & VT5_pair & imm_5_7=0b000 & VD5_pair {
		_vstub();
	}
	:VD5_pair".w |= vunpack("VT5_pair".h)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_19_20=0 & imm_16_18=0b000 & imm_13=1 & VT5_pair & imm_5_7=0b001 & VD5_pair {
		_vstub();
	}
}

# HVX/HVX SCATTER DOUBLE RESOURCE

# Vector Scatter
with slot: iclass=0b0010 {
	:"vscatter("S5","M1_13","VT5_pair".w).h="VD5_pair is imm_21_27=0b1111001 & S5 & M1_13 & VT5_pair & imm_5_7=0b010 & VD5_pair {
		_vstub();
	}	
	:"vscatter("S5","M1_13","VT5_pair".w).h+="VD5_pair is imm_21_27=0b1111001 & S5 & M1_13 & VT5_pair & imm_5_7=0b110 & VD5_pair {
		_vstub();
	}
	
	:"if("Qs4") vscatter("S5","M1_13","VT5_pair".w).h="VD5_pair is imm_21_27=0b1111101 & S5 & M1_13 & VT5_pair & imm_7=0 & Qs4 & VD5_pair {
		_vstub();
	}
}

# HVX/HVX SCATTER
# vector scatter
define pcodeop vscatter_w;
define pcodeop vscatter_h;
define pcodeop vscatter_wp;
define pcodeop vscatter_hp;

with slot: iclass=0b0010 {
    :"vscatter(" S5, imm_13u, VT5_pair").w = " VD5_pair is imm_21_27=0b1111001 & S5 & imm_13u & VT5_pair & imm_5_7=0b000 & VD5_pair {
        _vstub();
#        vscatter_w(S5, imm_13u:1, VT5_pair, VD5_pair); 
    }
    :"vscatter(" S5, imm_13u, VT5_pair").h = " VD5_pair is imm_21_27=0b1111001 & S5 & imm_13u & VT5_pair & imm_5_7=0b001 & VD5_pair {
        _vstub();
#        vscatter_h(S5, imm_13u:1, VT5_pair, VD5_pair); 
    }
    :"vscatter(" S5, imm_13u, VT5_pair").w+ = " VD5_pair is imm_21_27=0b1111001 & S5 & imm_13u & VT5_pair & imm_5_7=0b100 & VD5_pair {
        _vstub();
#        vscatter_wp(S5, imm_13u:1, VT5_pair, VD5_pair); 
    }
    :"vscatter(" S5, imm_13u, VT5_pair").h+ = " VD5_pair is imm_21_27=0b1111001 & S5 & imm_13u & VT5_pair & imm_5_7=0b101 & VD5_pair {
        _vstub();
#        vscatter_hp(S5, imm_13u:1, VT5_pair, VD5_pair); 
    }
    
    :"if("Qs4_5_6_pred") vscatter(" S5, imm_13u, VT5_pair").w = " VD5_pair is imm_21_27=0b1111100 & S5 & imm_13u & VT5_pair & imm_7=0 & Qs4_5_6_pred & VD5_pair {
        _vstub();
#        if(Qs4_5_6_pred == 0) goto <end>;
#            vscatter_w(S5, imm_13u:1, VT5_pair, VD5_pair);
#        <end> 
    }
    :"if("Qs4_5_6_pred") vscatter(" S5, imm_13u, VT5_pair").h = " VD5_pair is imm_21_27=0b1111100 & S5 & imm_13u & VT5_pair & imm_7=1 & Qs4_5_6_pred & VD5_pair {
        _vstub();
#        if(Qs4_5_6_pred == 0) goto <end>;
#            vscatter_h(S5, imm_13u:1, VT5_pair, VD5_pair);
#        <end> 
    }
}

# HVX/HVX SHIFT RESOURCE

# Narrowing shift
with slot: iclass=0b0001 {
	:VD5_pair".b = vasr("VT5_pair".h,"VS5_pair".h,"S3_16_18"):sat" is imm_24_27=0b1000 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b000 & VD5_pair {
		_vstub();
	}
	:VD5_pair".uh = vasr("VT5_pair".uw,"VS5_pair".uw,"S3_16_18"):rnd:sat" is imm_24_27=0b1000 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b001 & VD5_pair {
		_vstub();
	}
	:VD5_pair".uh = vasr("VT5_pair".w,"VS5_pair".w,"S3_16_18"):rnd:sat" is imm_24_27=0b1000 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b010 & VD5_pair {
		_vstub();
	}
	:VD5_pair".ub = vasr("VT5_pair".uh,"VS5_pair".uh,"S3_16_18"):rnd:sat" is imm_24_27=0b1000 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
		_vstub();
	}
	:VD5_pair".uh = vasr("VT5_pair".uw,"VS5_pair".uw,"S3_16_18"):sat" is imm_24_27=0b1000 & VS5_pair & S3_16_18 & imm_13=1 & VT5_pair & imm_5_7=0b100 & VD5_pair {
		_vstub();
	}
	:VD5_pair".ub = vasr("VT5_pair".uh,"VS5_pair".uh,"S3_16_18"):sat" is imm_24_27=0b1000 & VS5_pair & S3_16_18 & imm_13=1 & VT5_pair & imm_5_7=0b101 & VD5_pair {
		_vstub();
	}
	:VD5_pair".h = vasr("VT5_pair".w,"VS5_pair".w,"S3_16_18")" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b010 & VD5_pair {
		_vstub();
	}
	:VD5_pair".h = vasr("VT5_pair".w,"VS5_pair".w,"S3_16_18"):sat" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b011 & VD5_pair {
		_vstub();
	}
	:VD5_pair".h = vasr("VT5_pair".w,"VS5_pair".w,"S3_16_18"):rnd:sat" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b100 & VD5_pair {
		_vstub();
	}
	:VD5_pair".uh = vasr("VT5_pair".w,"VS5_pair".w,"S3_16_18"):sat" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b101 & VD5_pair {
		_vstub();
	}
	
	:VD5_pair".ub = vasr("VT5_pair".h,"VS5_pair".h,"S3_16_18"):sat" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b110 & VD5_pair {
		_vstub();
	}
	:VD5_pair".ub = vasr("VT5_pair".h,"VS5_pair".h,"S3_16_18"):rnd:sat" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
		_vstub();
	}
	:VD5_pair".b = vasr("VT5_pair".h,"VS5_pair".h,"S3_16_18"):rnd:sat" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=1 & VT5_pair & imm_5_7=0b000 & VD5_pair {
		_vstub();
	}
}

# Compute Contiguous offsets for valid positions
with slot: iclass=0b0001 {
	:VD5_pair".b = prefixsum(" Qv4 ")" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_19_20=0 & imm_16_18=0b011 & imm_13=1 & imm_11_12=0 & imm_5_10=0b000010 & VD5_pair {
		_vstub();
	}
	:VD5_pair".h = prefixsum(" Qv4 ")" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_19_20=0 & imm_16_18=0b011 & imm_13=1 & imm_11_12=0 & imm_5_10=0b001010 & VD5_pair {
		_vstub();
	}
	:VD5_pair".w = prefixsum(" Qv4 ")" is imm_24_27=0b1110 & Qv4 & imm_21=0 & imm_19_20=0 & imm_16_18=0b011 & imm_13=1 & imm_11_12=0 & imm_5_10=0b010010 & VD5_pair {
		_vstub();
	}
}

# Add half precision vector by vector
with slot: iclass=0b0001 {
	:VD5_pair".qf16 = vadd(" VT5_pair".qf16,"VS5_pair".qf16)" is imm_21_27=0b1111011 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b010 & VD5_pair {
		_vstub();
	}
	:VD5_pair".qf16 = vadd(" VT5_pair".hf,"VS5_pair".hf)" is imm_21_27=0b1111011 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b011 & VD5_pair {
		_vstub();
	}
	:VD5_pair".qf16 = vadd(" VT5_pair".qf16,"VS5_pair".hf)" is imm_21_27=0b1111011 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b100 & VD5_pair {
		_vstub();
	}
}

# Add single precision vector by vector
with slot: iclass=0b0001 {
	:VD5_pair".qf32 = vadd(" VT5_pair".qf32,"VS5_pair".qf32)" is imm_21_27=0b1111101 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b000 & VD5_pair {
		_vstub();
	}
	:VD5_pair".qf32 = vadd(" VT5_pair".sf,"VS5_pair".sf)" is imm_21_27=0b1111101 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b001 & VD5_pair {
		_vstub();
	}
	:VD5_pair".qf32 = vadd(" VT5_pair".qf32,"VS5_pair".sf)" is imm_21_27=0b1111101 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b010 & VD5_pair {
		_vstub();
	}
}

# Shift and add
with slot: iclass=0b0001 {
	:VD5_pair".w += vasl("VT5_pair".w,"S5")" is imm_21_27=0b1001011 & S5 & imm_13=1 & VT5_pair & imm_5_7=0b010 & VD5_pair {
		_vstub();
	}
	:VD5_pair".w += vasr("VT5_pair".w,"S5")" is imm_21_27=0b1001011 & S5 & imm_13=1 & VT5_pair & imm_5_7=0b101 & VD5_pair {
		_vstub();
	}
	:VD5_pair".h += vasr("VT5_pair".h,"S5")" is imm_21_27=0b1001100 & S5 & imm_13=1 & VT5_pair & imm_5_7=0b111 & VD5_pair {
		_vstub();
	}
	:VD5_pair".h += vasl("VT5_pair".h,"S5")" is imm_21_27=0b1001101 & S5 & imm_13=1 & VT5_pair & imm_5_7=0b101 & VD5_pair {
		_vstub();
	}
}

#shift
with slot: iclass=0b0001 {
    :VD5_pair".b = vasr("VT5_pair".h,"VS5_pair".h,"S3_16_18"):sat" is imm_24_27=0b1000 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b000 & VD5_pair {
        _vstub();
    }
    :VD5_pair".uh = vasr("VT5_pair".hw,"VS5_pair".uw,"S3_16_18"):rnd:sat" is imm_24_27=0b1000 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b001 & VD5_pair {
        _vstub();
    }
    :VD5_pair".uh = vasr("VT5_pair".w,"VS5_pair".w,"S3_16_18"):sat" is imm_24_27=0b1000 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }
    :VD5_pair".ub = vasr("VT5_pair".uh,"VS5_pair".uh,"S3_16_18"):rnd:sat" is imm_24_27=0b1000 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }
    :VD5_pair".uh = vasr("VT5_pair".uw,"VS5_pair".uw,"S3_16_18"):sat" is imm_24_27=0b1000 & VS5_pair & S3_16_18 & imm_13=1 & VT5_pair & imm_5_7=0b100 & VD5_pair {
        _vstub();
    }
    :VD5_pair".ub = vasr("VT5_pair".uh,"VS5_pair".uh,"S3_16_18"):sat" is imm_24_27=0b1000 & VS5_pair & S3_16_18 & imm_13=1 & VT5_pair & imm_5_7=0b101 & VD5_pair {
        _vstub();
    }
    
    :VD5_pair".w = vasr("VT5_pair".w,"T5")" is imm_21_27=0b1001011 & VS5_pair & imm_13=0 & T5 & imm_5_7=0b101 & VD5_pair {
        _vstub();
    }
    :VD5_pair".h = vasr("VT5_pair".h,"T5")" is imm_21_27=0b1001011 & VS5_pair & imm_13=0 & T5 & imm_5_7=0b110 & VD5_pair {
        _vstub();
    }
    :VD5_pair".w = vasl("VT5_pair".w,"T5")" is imm_21_27=0b1001011 & VS5_pair & imm_13=0 & T5 & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }
    :VD5_pair".h = vasl("VT5_pair".w,"T5")" is imm_21_27=0b1001100 & VS5_pair & imm_13=0 & T5 & imm_5_7=0b000 & VD5_pair {
        _vstub();
    }
    :VD5_pair".uw = vasl("VT5_pair".uw,"T5")" is imm_21_27=0b1001100 & VS5_pair & imm_13=0 & T5 & imm_5_7=0b001 & VD5_pair {
        _vstub();
    }
    :VD5_pair".uh = vasl("VT5_pair".uh,"T5")" is imm_21_27=0b1001100 & VS5_pair & imm_13=0 & T5 & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }
    :VD5_pair".ub = vasl("VT5_pair".ub,"T5")" is imm_21_27=0b1001100 & VS5_pair & imm_13=0 & T5 & imm_5_7=0b011 & VD5_pair {
        _vstub();
    }
    
    :VD5_pair".h = vasr("VT5_pair".w,"VS5_pair".w,"S3_16_18")" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b010 & VD5_pair {
        _vstub();
    }
    :VD5_pair".h = vasr("VT5_pair".w,"VS5_pair".w,"S3_16_18"):sat" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b011 & VD5_pair {
        _vstub();
    }
    :VD5_pair".h = vasr("VT5_pair".w,"VS5_pair".w,"S3_16_18"):rnd:sat" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b100 & VD5_pair {
        _vstub();
    }
    :VD5_pair".uh = vasr("VT5_pair".w,"VS5_pair".w,"S3_16_18"):sat" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b101 & VD5_pair {
        _vstub();
    }
    :VD5_pair".ub = vasr("VT5_pair".h,"VS5_pair".h,"S3_16_18"):sat" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b110 & VD5_pair {
        _vstub();
    }
    :VD5_pair".ub = vasr("VT5_pair".h,"VS5_pair".h,"S3_16_18"):rnd:sat" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
        _vstub();
    }
    :VD5_pair".b = vasr("VT5_pair".h,"VS5_pair".h,"S3_16_18"):rnd:sat" is imm_24_27=0b1011 & VS5_pair & S3_16_18 & imm_13=1 & VT5_pair & imm_5_7=0b000 & VD5_pair {
        _vstub();
    }
}


# Narrowing shift by vector
with slot: iclass=0b0001 {
	:VD5_pair".uh = vasr("VS5_pair".w,"VT5_pair".uh):sat" is imm_21_27=0b1101000 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b000 & VD5_pair {
		_vstub();
	}
	:VD5_pair".uh = vasr("VS5_pair".w,"VT5_pair".uh):rnd:sat" is imm_21_27=0b1101000 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b001 & VD5_pair {
		_vstub();
	}
	:VD5_pair".ub = vasr("VS5_pair".uh,"VT5_pair".ub):sat" is imm_21_27=0b1101000 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b010 & VD5_pair {
		_vstub();
	}
	:VD5_pair".ub = vasr("VS5_pair".uh,"VT5_pair".ub):rnd:sat" is imm_21_27=0b1101000 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b011 & VD5_pair {
		_vstub();
	}
}

# Convert qfloat to IEEE floating point
with slot: iclass=0b0001 {
	:VD5_pair".sf = "VT5_pair".qf32" is imm_24_27=0b1110 & imm_22_23=0 & imm_12=0 & imm_19_20=0 & imm_16_18=0b100 & imm_13=1 & VT5_pair & imm_5_7=0b000 & VD5_pair {
		_vstub();
	}	
	:VD5_pair".hf = "VT5_pair".qf16" is imm_24_27=0b1110 & imm_22_23=0 & imm_12=0 & imm_19_20=0 & imm_16_18=0b100 & imm_13=1 & VT5_pair & imm_5_7=0b011 & VD5_pair {
		_vstub();
	}
	:VD5_pair".hf = "VT5_pair".qf32" is imm_24_27=0b1110 & imm_22_23=0 & imm_12=0 & imm_19_20=0 & imm_16_18=0b100 & imm_13=1 & VT5_pair & imm_5_7=0b110 & VD5_pair {
		_vstub();
	}
}

# Round to next smaller element size
with slot: iclass=0b0001 {
	:VD5_pair".h = vround("VT5_pair".w,"VS5_pair".w):sat" is imm_21_27=0b1111011 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b100 & VD5_pair {
		_vstub();
	}
	:VD5_pair".uh = vround("VT5_pair".w,"VS5_pair".w):sat" is imm_21_27=0b1111011 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b101 & VD5_pair {
		_vstub();
	}
	:VD5_pair".b = vround("VT5_pair".h,"VS5_pair".h):sat" is imm_21_27=0b1111011 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b110 & VD5_pair {
		_vstub();
	}
	:VD5_pair".ub = vround("VT5_pair".h,"VS5_pair".h):sat" is imm_21_27=0b1111011 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
		_vstub();
	}
	:VD5_pair".ub = vround("VT5_pair".uh,"VS5_pair".uh):sat" is imm_21_27=0b1111111 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b011 & VD5_pair {
		_vstub();
	}
	:VD5_pair".uh = vround("VT5_pair".uw,"VS5_pair".uw):sat" is imm_21_27=0b1111111 & VS5_pair & imm_13=0 & VT5_pair & imm_5_7=0b100 & VD5_pair {
		_vstub();
	}
}

# Vector rotate right word
with slot: iclass=0b0001 {
	:VD5_pair".uw = vrotr("VT5_pair".uw,"VS5_pair".uw)" is imm_21_27=0b1010100 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b111 & VD5_pair {
		_vstub();
	}	
}

# Subtract half precision vector by vector
with slot: iclass=0b0001 {
	:VD5_pair".qf16 = vsub("VT5_pair".qf16,"VS5_pair".qf16)" is imm_21_27=0b1111011 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b101 & VD5_pair {
		_vstub();
	}
	:VD5_pair".qf16 = vsub("VT5_pair".hf,"VS5_pair".hf)" is imm_21_27=0b1111011 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b110 & VD5_pair {
		_vstub();
	}
	:VD5_pair".qf16 = vsub("VT5_pair".qf16,"VS5_pair".hf)" is imm_21_27=0b1111011 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b111 & VD5_pair {
		_vstub();
	}
}

# Subtract single precision vector by vector
with slot: iclass=0b0001 {
	:VD5_pair".qf16 = vsub("VT5_pair".qf16,"VS5_pair".qf32)" is imm_21_27=0b1111101 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b011 & VD5_pair {
		_vstub();
	}
	:VD5_pair".qf32 = vsub("VT5_pair".sf,"VS5_pair".sf)" is imm_21_27=0b1111101 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b100 & VD5_pair {
		_vstub();
	}
	:VD5_pair".qf32 = vsub("VT5_pair".qf32,"VS5_pair".sf)" is imm_21_27=0b1111101 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b101 & VD5_pair {
		_vstub();
	}
}

# Bit counting
with slot: iclass=0b0001 {
	:VD5_pair".uw = vcl0("VT5_pair".uw)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b10 & imm_13=0 & VT5_pair & imm_5_7=0b101 & VD5_pair {
		_vstub();
	}
	:VD5_pair".h = vpopcount("VT5_pair".h)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b10 & imm_13=0 & VT5_pair & imm_5_7=0b110 & VD5_pair {
		_vstub();
	}
	:VD5_pair".uh = vcl0("VT5_pair".uh)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b10 & imm_13=0 & VT5_pair & imm_5_7=0b111 & VD5_pair {
		_vstub();
	}
	:VD5_pair".w = vnormamt("VT5_pair".w)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b11 & imm_13=0 & VT5_pair & imm_5_7=0b100 & VD5_pair {
		_vstub();
	}
	:VD5_pair".h = vnormamt("VT5_pair".h)" is imm_24_27=0b1110 & imm_22_23=0 & imm_21=0 & imm_18_20=0 & imm_16_17=0b11 & imm_13=0 & VT5_pair & imm_5_7=0b101 & VD5_pair {
		_vstub();
	}
	:VD5_pair".h = vadd(vcb("VT5_pair".h),"VS5_pair".h)" is imm_21_27=0b1111000 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b000 & VD5_pair {
		_vstub();
	}
	:VD5_pair".w = vadd(vclb("VT5_pair".w),"VS5_pair".w)" is imm_21_27=0b1111000 & VS5_pair & imm_13=1 & VT5_pair & imm_5_7=0b001 & VD5_pair {
		_vstub();
	}
}

# HVX/MPY STORE

# Byte enabled aligned
with slot: iclass=0b0010 {
	:"if("Qv4_11_12") vmem("S5"+"s4") = VD5_pair" is imm_21_27=0b1000100 & S5 & imm_13u & Qv4_11_12 & imm_8_10 & imm_5_7=0b000 & VD5_pair [ s4 = (imm_13u << 3) | imm_8_10;] {
		_vstub();
	}
	:"if(!"Qv4_11_12") vmem("S5"+"s4") = VD5_pair" is imm_21_27=0b1000100 & S5 & imm_13u & Qv4_11_12 & imm_8_10 & imm_5_7=0b001 & VD5_pair [ s4 = (imm_13u << 3) | imm_8_10;] {
		_vstub();
	}
	:"if("Qv4_11_12") vmem("S5"+"s4"):nt = VD5_pair" is imm_21_27=0b1000110 & S5 & imm_13u & Qv4_11_12 & imm_8_10 & imm_5_7=0b000 & VD5_pair [ s4 = (imm_13u << 3) | imm_8_10;] {
		_vstub();
	}
	:"if("!Qv4_11_12") vmem("S5"+"s4"):nt = VD5_pair" is imm_21_27=0b1000110 & S5 & imm_13u & Qv4_11_12 & imm_8_10 & imm_5_7=0b001 & VD5_pair [ s4 = (imm_13u << 3) | imm_8_10;] {
		_vstub();
	}
	
	:"if("Qv4_11_12") vmem("S5"++"imm_8_10") = VD5_pair" is imm_21_27=0b1001100 & S5 & imm_13=0 & Qv4_11_12 & imm_8_10 & imm_5_7=0b000 & VD5_pair {
		_vstub();
	}
}

# New
#TODO

# Aligned
#TODO

# Unaligned
with slot: iclass=0b0010 {
	:"vmemu("S5"+"s4") = " VD5_pair is imm_21_27=0b1000001 & S5 & imm_13u & imm_11_12=0 & imm_8_10 & imm_5_7=0b111 & VD5_pair [ s4 = (imm_13u << 3) | imm_8_10;] {
		_vstub();
	}
	:"if("Qv4_11_12") vmemu("S5"+"s4") = " VD5_pair is imm_21_27=0b1000101 & S5 & imm_13u & Qv4_11_12 & imm_8_10 & imm_5_7=0b110 & VD5_pair [ s4 = (imm_13u << 3) | imm_8_10;] {
		_vstub();
	}
	:"if(!"Qv4_11_12") vmemu("S5"+"s4") = " VD5_pair is imm_21_27=0b1000101 & S5 & imm_13u & Qv4_11_12 & imm_8_10 & imm_5_7=0b111 & VD5_pair [ s4 = (imm_13u << 3) | imm_8_10;] {
		_vstub();
	}
	
	:"vmemu("S5"++"imm_8_10") = " VD5_pair is imm_21_27=0b1001001 & S5 & imm_11_13=0 & imm_8_10 & imm_5_7=0b111 & VD5_pair {
		_vstub();
	}
	:"if("Qv4_11_12") vmemu("S5"++"imm_8_10") = " VD5_pair is imm_21_27=0b1001101 & S5 & Qv4_11_12 & imm_8_10 & imm_5_7=0b110 & VD5_pair {
		_vstub();
	}
	:"if(!"Qv4_11_12") vmemu("S5"++"imm_8_10") = " VD5_pair is imm_21_27=0b1001101 & S5 & Qv4_11_12 & imm_8_10 & imm_5_7=0b111 & VD5_pair {
		_vstub();
	}
	
	:"vmemu("S5"++"M1_13") = " VD5_pair is imm_21_27=0b1011001 & S5 & M1_13 & imm_8_12=0 & imm_5_7=0b111 & VD5_pair {
		_vstub();
	}
	:"if("Qv4_11_12") vmemu("S5"++"M1_13") = " VD5_pair is imm_21_27=0b1011101 & S5 & M1_13 & Qv4_11_12 & imm_5_7=0b110 & VD5_pair {
		_vstub();
	}
	:"if(!"Qv4_11_12") vmemu("S5"++"M1_13") = " VD5_pair is imm_21_27=0b1011101 & S5 & M1_13 & Qv4_11_12 & imm_5_7=0b111 & VD5_pair {
		_vstub();
	}
}

# Scatter release
with slot: iclass=0b0010 {
	:"vmem("S5"+"s4"):scatter_release" is imm_21_27=0b1000001 & S5 & imm_13u & imm_11_12=0 & imm_8_10 & imm_5_7=0b001 & imm_4=0 & imm_3=1 & imm_0_2=0 [ s4 = (imm_13u << 3) | imm_8_10;] {
		_vstub();
	}
	
	:"vmem("S5"++"imm_8_10"):scatter_release" is imm_21_27=0b1001001 & S5 & imm_11_13=0 & imm_8_10 & imm_5_7=0b001 & imm_4=0 & imm_3=1 & imm_0_2=0 {
		_vstub();
	}
	
	:"vmem("S5"++"M1_13"):scatter_release" is imm_21_27=0b1011001 & S5 & M1_13 & imm_8_12=0 & imm_5_7=0b001 & imm_4=0 & imm_3=1 & imm_0_2=0 {
		_vstub();
	}	
}
